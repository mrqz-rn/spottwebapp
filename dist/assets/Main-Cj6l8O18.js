const __vite__fileDeps=["assets/web-CluD-S1z.js","assets/index-ygXwHGmL.js","assets/index-4XsXE8Jn.css"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{_ as T,I as b,o as x,c as $,w as I,a as w,n as F,t as G,r as v,g as H,b as N,d as Y,e as Z,f as q,h as K,i as J,j as Q,k as P,l as A,m as y,p as k,q as D,s as U,u as X,v as j}from"./index-ygXwHGmL.js";const ee={components:{IonPage:b},data(){return{message:"Please wait...",color:"color1"}},mounted(){let a=1,p=setInterval(()=>{a++,this.color="color"+a,a==4&&(a=0)},500);setTimeout(()=>clearInterval(p),25e3)}},te={style:{"font-weight":"600"}};function ne(a,p,c,l,i,u){const d=v("ion-page");return x(),$(d,{style:{display:"flex","justify-content":"center","align-items":"center","background-color":"whitesmoke"}},{default:I(()=>[w("div",{class:F(["loader",i.color])},null,2),w("div",{class:F(i.message?"animate__animated animate__bounceIn":"animate__animated animate__bounceOut"),style:{color:"black",position:"absolute",bottom:"15vh"}},[w("span",te,G(i.message),1)],2)]),_:1})}const se=T(ee,[["render",ne]]);var V={exports:{}},E={exports:{}};(function(){var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",p={rotl:function(c,l){return c<<l|c>>>32-l},rotr:function(c,l){return c<<32-l|c>>>l},endian:function(c){if(c.constructor==Number)return p.rotl(c,8)&16711935|p.rotl(c,24)&4278255360;for(var l=0;l<c.length;l++)c[l]=p.endian(c[l]);return c},randomBytes:function(c){for(var l=[];c>0;c--)l.push(Math.floor(Math.random()*256));return l},bytesToWords:function(c){for(var l=[],i=0,u=0;i<c.length;i++,u+=8)l[u>>>5]|=c[i]<<24-u%32;return l},wordsToBytes:function(c){for(var l=[],i=0;i<c.length*32;i+=8)l.push(c[i>>>5]>>>24-i%32&255);return l},bytesToHex:function(c){for(var l=[],i=0;i<c.length;i++)l.push((c[i]>>>4).toString(16)),l.push((c[i]&15).toString(16));return l.join("")},hexToBytes:function(c){for(var l=[],i=0;i<c.length;i+=2)l.push(parseInt(c.substr(i,2),16));return l},bytesToBase64:function(c){for(var l=[],i=0;i<c.length;i+=3)for(var u=c[i]<<16|c[i+1]<<8|c[i+2],d=0;d<4;d++)i*8+d*6<=c.length*8?l.push(a.charAt(u>>>6*(3-d)&63)):l.push("=");return l.join("")},base64ToBytes:function(c){c=c.replace(/[^A-Z0-9+\/]/ig,"");for(var l=[],i=0,u=0;i<c.length;u=++i%4)u!=0&&l.push((a.indexOf(c.charAt(i-1))&Math.pow(2,-2*u+8)-1)<<u*2|a.indexOf(c.charAt(i))>>>6-u*2);return l}};E.exports=p})();var oe=E.exports,B={utf8:{stringToBytes:function(a){return B.bin.stringToBytes(unescape(encodeURIComponent(a)))},bytesToString:function(a){return decodeURIComponent(escape(B.bin.bytesToString(a)))}},bin:{stringToBytes:function(a){for(var p=[],c=0;c<a.length;c++)p.push(a.charCodeAt(c)&255);return p},bytesToString:function(a){for(var p=[],c=0;c<a.length;c++)p.push(String.fromCharCode(a[c]));return p.join("")}}},S=B;/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var re=function(a){return a!=null&&(L(a)||ae(a)||!!a._isBuffer)};function L(a){return!!a.constructor&&typeof a.constructor.isBuffer=="function"&&a.constructor.isBuffer(a)}function ae(a){return typeof a.readFloatLE=="function"&&typeof a.slice=="function"&&L(a.slice(0,0))}(function(){var a=oe,p=S.utf8,c=re,l=S.bin,i=function(u,d){u.constructor==String?d&&d.encoding==="binary"?u=l.stringToBytes(u):u=p.stringToBytes(u):c(u)?u=Array.prototype.slice.call(u,0):!Array.isArray(u)&&u.constructor!==Uint8Array&&(u=u.toString());for(var o=a.bytesToWords(u),f=u.length*8,n=1732584193,e=-271733879,s=-1732584194,t=271733878,r=0;r<o.length;r++)o[r]=(o[r]<<8|o[r]>>>24)&16711935|(o[r]<<24|o[r]>>>8)&4278255360;o[f>>>5]|=128<<f%32,o[(f+64>>>9<<4)+14]=f;for(var h=i._ff,_=i._gg,m=i._hh,g=i._ii,r=0;r<o.length;r+=16){var M=n,O=e,z=s,W=t;n=h(n,e,s,t,o[r+0],7,-680876936),t=h(t,n,e,s,o[r+1],12,-389564586),s=h(s,t,n,e,o[r+2],17,606105819),e=h(e,s,t,n,o[r+3],22,-1044525330),n=h(n,e,s,t,o[r+4],7,-176418897),t=h(t,n,e,s,o[r+5],12,1200080426),s=h(s,t,n,e,o[r+6],17,-1473231341),e=h(e,s,t,n,o[r+7],22,-45705983),n=h(n,e,s,t,o[r+8],7,1770035416),t=h(t,n,e,s,o[r+9],12,-1958414417),s=h(s,t,n,e,o[r+10],17,-42063),e=h(e,s,t,n,o[r+11],22,-1990404162),n=h(n,e,s,t,o[r+12],7,1804603682),t=h(t,n,e,s,o[r+13],12,-40341101),s=h(s,t,n,e,o[r+14],17,-1502002290),e=h(e,s,t,n,o[r+15],22,1236535329),n=_(n,e,s,t,o[r+1],5,-165796510),t=_(t,n,e,s,o[r+6],9,-1069501632),s=_(s,t,n,e,o[r+11],14,643717713),e=_(e,s,t,n,o[r+0],20,-373897302),n=_(n,e,s,t,o[r+5],5,-701558691),t=_(t,n,e,s,o[r+10],9,38016083),s=_(s,t,n,e,o[r+15],14,-660478335),e=_(e,s,t,n,o[r+4],20,-405537848),n=_(n,e,s,t,o[r+9],5,568446438),t=_(t,n,e,s,o[r+14],9,-1019803690),s=_(s,t,n,e,o[r+3],14,-187363961),e=_(e,s,t,n,o[r+8],20,1163531501),n=_(n,e,s,t,o[r+13],5,-1444681467),t=_(t,n,e,s,o[r+2],9,-51403784),s=_(s,t,n,e,o[r+7],14,1735328473),e=_(e,s,t,n,o[r+12],20,-1926607734),n=m(n,e,s,t,o[r+5],4,-378558),t=m(t,n,e,s,o[r+8],11,-2022574463),s=m(s,t,n,e,o[r+11],16,1839030562),e=m(e,s,t,n,o[r+14],23,-35309556),n=m(n,e,s,t,o[r+1],4,-1530992060),t=m(t,n,e,s,o[r+4],11,1272893353),s=m(s,t,n,e,o[r+7],16,-155497632),e=m(e,s,t,n,o[r+10],23,-1094730640),n=m(n,e,s,t,o[r+13],4,681279174),t=m(t,n,e,s,o[r+0],11,-358537222),s=m(s,t,n,e,o[r+3],16,-722521979),e=m(e,s,t,n,o[r+6],23,76029189),n=m(n,e,s,t,o[r+9],4,-640364487),t=m(t,n,e,s,o[r+12],11,-421815835),s=m(s,t,n,e,o[r+15],16,530742520),e=m(e,s,t,n,o[r+2],23,-995338651),n=g(n,e,s,t,o[r+0],6,-198630844),t=g(t,n,e,s,o[r+7],10,1126891415),s=g(s,t,n,e,o[r+14],15,-1416354905),e=g(e,s,t,n,o[r+5],21,-57434055),n=g(n,e,s,t,o[r+12],6,1700485571),t=g(t,n,e,s,o[r+3],10,-1894986606),s=g(s,t,n,e,o[r+10],15,-1051523),e=g(e,s,t,n,o[r+1],21,-2054922799),n=g(n,e,s,t,o[r+8],6,1873313359),t=g(t,n,e,s,o[r+15],10,-30611744),s=g(s,t,n,e,o[r+6],15,-1560198380),e=g(e,s,t,n,o[r+13],21,1309151649),n=g(n,e,s,t,o[r+4],6,-145523070),t=g(t,n,e,s,o[r+11],10,-1120210379),s=g(s,t,n,e,o[r+2],15,718787259),e=g(e,s,t,n,o[r+9],21,-343485551),n=n+M>>>0,e=e+O>>>0,s=s+z>>>0,t=t+W>>>0}return a.endian([n,e,s,t])};i._ff=function(u,d,o,f,n,e,s){var t=u+(d&o|~d&f)+(n>>>0)+s;return(t<<e|t>>>32-e)+d},i._gg=function(u,d,o,f,n,e,s){var t=u+(d&f|o&~f)+(n>>>0)+s;return(t<<e|t>>>32-e)+d},i._hh=function(u,d,o,f,n,e,s){var t=u+(d^o^f)+(n>>>0)+s;return(t<<e|t>>>32-e)+d},i._ii=function(u,d,o,f,n,e,s){var t=u+(o^(d|~f))+(n>>>0)+s;return(t<<e|t>>>32-e)+d},i._blocksize=16,i._digestsize=16,V.exports=function(u,d){if(u==null)throw new Error("Illegal argument "+u);var o=a.wordsToBytes(i(u,d));return d&&d.asBytes?o:d&&d.asString?l.bytesToString(o):a.bytesToHex(o)}})();var ie=V.exports;const ce=H(ie),le="/icon.png",ue={components:{IonPage:b,IonButton:N,IonInput:Y,IonCardTitle:Z,IonLabel:q,IonInputPasswordToggle:K,IonCheckbox:J,IonBackdrop:Q,alertController:P,loadingController:A},data(){return{user_input:{username:"",password:"",remember:!1},device:"",log_response:{}}},async created(){let a=await this.$function.getDeviceInfo();this.device="".concat(a.model,"=>").concat(a.identifier),await this.$storage.getItem("remember-user")!=null&&(this.user_input=await this.$storage.getItem("remember-user")),this.$function.checkperms()},methods:{async login(){const a=await A.create({message:"Please Wait a moment...",translucent:!0});if(await a.present(),!this.$function.isTimeAuto())return this.$function.showAlert({header:"Warning",message:"Please enable time auto to use this app."}),await a.dismiss();if(!this.$function.checkTimeZone().status)return await a.dismiss();this.user_input.remember&&await this.$storage.setItem("remember-user",this.user_input);let c={username:this.user_input.username,password:ce(this.user_input.password),device:this.device},l=await this.$api.login(c);if(this.log_response=l,l.status)l.isRegistered?(await a.dismiss(),await this.$storage.setItem("session-user",l.data),await this.$storage.setItem("app-config",l.appconfig),this.$router.push("dashboard").then(()=>{window.location.reload()})):(await a.dismiss(),this.registerDevice());else{let i={header:"Warning",message:l.message};this.$function.showAlert(i),await a.dismiss()}await a.dismiss()},async registerDevice(){await(await P.create({header:"Confirm",message:"Do you want to register this device to your account?",buttons:[{text:"No",role:"cancel"},{text:"Yes",role:"confirm",handler:this.register}]})).present()},async register(){let a=await this.$api.savedata({tableName:"spottv2.device_registered",fields:{userID:this.log_response.data.ID,device:this.device},key:["device"]});if(a.error=0){let p={header:"Success!",message:"Device registered successfully. Please login to continue."};this.$function.showAlert(p)}setTimeout(async()=>{await this.login()},750)}}},R=a=>(D("data-v-ca71f365"),a=a(),U(),a),pe={id:"container",class:"pa-6",style:{"margin-top":"-10%"}},de=R(()=>w("img",{style:{height:"15vh",margin:"auto"},src:le},null,-1)),fe={class:"d-flex justify-start py-2 px-1"},he=R(()=>w("span",{style:{color:"white"}},"Remember me",-1));function _e(a,p,c,l,i,u){const d=v("IonLabel"),o=v("IonCardTitle"),f=v("IonInput"),n=v("IonInputPasswordToggle"),e=v("ion-checkbox"),s=v("IonButton"),t=v("ion-page");return x(),$(t,{class:"backdrop"},{default:I(()=>[y(d,{style:{color:"white","font-size":"13px"},class:"pa-2"},{default:I(()=>[k(" Version: 1.2 ")]),_:1}),w("div",pe,[w("div",null,[de,y(o,{class:"pb-5",style:{color:"white","font-weight":"600",padding:"4vh"}},{default:I(()=>[k("STERLING PAPER GROUP ONLINE TIME TRACKER")]),_:1}),y(f,{modelValue:i.user_input.username,"onUpdate:modelValue":p[0]||(p[0]=r=>i.user_input.username=r),label:"Username",fill:"outline","label-placement":"stacked",placeholder:"Enter Username",style:{"text-align":"left !important"},class:"pb-3 custom"},null,8,["modelValue"]),y(f,{modelValue:i.user_input.password,"onUpdate:modelValue":p[1]||(p[1]=r=>i.user_input.password=r),type:"password",label:"Password",fill:"outline",placeholder:"Enter Password","label-placement":"stacked",style:{"text-align":"left !important"},class:"custom"},{default:I(()=>[y(n,{slot:"end"})]),_:1},8,["modelValue"]),w("div",fe,[y(e,{modelValue:i.user_input.remember,"onUpdate:modelValue":p[2]||(p[2]=r=>i.user_input.remember=r),"label-placement":"end"},{default:I(()=>[he]),_:1},8,["modelValue"])]),y(s,{onClick:p[3]||(p[3]=r=>u.login()),class:"mt-4",expand:"full",shape:"round",size:"large"},{default:I(()=>[k("LOG IN")]),_:1})])])]),_:1})}const me=T(ue,[["render",_e],["__scopeId","data-v-ca71f365"]]);X("Browser",{web:()=>j(()=>import("./web-CluD-S1z.js"),__vite__mapDeps([0,1,2])).then(a=>new a.BrowserWeb)});const ge="/new.png",ve={name:"Update",components:{IonPage:b,IonButton:N},data(){return{}},methods:{async updateNow(){},later(){navigator.app.exitApp()}}},C=a=>(D("data-v-347337f5"),a=a(),U(),a),we={class:"d-flex justify-center backdrop"},Ie={style:{position:"absolute",top:"50%",transform:"translateY(-50%)",width:"80vw"}},ye=C(()=>w("img",{class:"d-flex pb-5",style:{height:"15vh",margin:"auto"},src:ge},null,-1)),xe=C(()=>w("h3",{class:"d-flex justify-center pb-2",style:{color:"white"}},"New Version Available",-1)),$e=C(()=>w("p",{class:"pb-7",style:{"text-align":"center",color:"#BDBDBD"}},"Please download and install the new version to access our latest features",-1));function ke(a,p,c,l,i,u){const d=v("ion-button"),o=v("ion-page");return x(),$(o,{class:"backdrop"},{default:I(()=>[w("div",we,[w("div",Ie,[ye,xe,$e,y(d,{onClick:p[0]||(p[0]=f=>u.updateNow()),class:"mb-2",expand:"full",color:"primary",shape:"round"},{default:I(()=>[k("Update Now")]),_:1}),y(d,{onClick:p[1]||(p[1]=f=>u.later()),expand:"full",color:"medium",shape:"round"},{default:I(()=>[k("Close the app")]),_:1})])])]),_:1})}const Te=T(ve,[["render",ke],["__scopeId","data-v-347337f5"]]),be={};function Be(a,p){return null}const Ce=T(be,[["render",Be]]),Fe={components:{IonPage:b,Load:se,Login:me,Update:Te,Maintenance:Ce},data(){return{APP_VERSION:"1.2.8",app:{status:!1,user:!1,update:!1,maintenance:!1},loaded:!1}},async created(){let a=await this.$function.getNet(),p=await this.$function.getUser(),c=await this.$function.checknet();if(p){if(this.app.status=!0,this.app.user=!0,a.connected&&c){let l=await this.checkAppConfig();if(l.version!=this.APP_VERSION)this.app.update=!0;else if(l.onMaintenance==1)this.app.maintenance=!0;else{let i=await this.checkUser(p);i.forceLogout==1?(await this.$storage.removeItem("session-user"),this.app.status=!0,this.app.user=!1):i.updateConfig==1?(i.updateConfig=0,await this.$storage.setItem("session-user",i)):(this.app.status=!0,this.app.user=!0)}}}else this.app.status=!0,this.app.user=!1;this.app.status&&this.app.user&&!this.app.update&&!this.app.maintenance&&this.$router.push("dashboard").then(()=>{window.location.reload()})},methods:{async checkUser(a){let p=await this.$api.masterselect({table_name:"spottv2.users_view",having:{username:a.username}});return await this.$api.savedata({tableName:"spottv2.user_config",fields:{userID:p.ID,updateConfig:0,forceLogout:0},key:["userID"]}),p[0]},async checkAppConfig(a){return(await this.$api.masterselect({table_name:"spottv2.app_config"}))[0]}}};function Pe(a,p,c,l,i,u){const d=v("Login"),o=v("Update"),f=v("Maintenance"),n=v("Load"),e=v("IonPage");return x(),$(e,null,{default:I(()=>[i.app.status&&!i.app.user?(x(),$(d,{key:0})):i.app.status&&!i.app.user&&i.app.update?(x(),$(o,{key:1})):i.app.status&&!i.app.user&&i.app.maintenance?(x(),$(f,{key:2})):(x(),$(n,{key:3}))]),_:1})}const Se=T(Fe,[["render",Pe]]);export{Se as default};
