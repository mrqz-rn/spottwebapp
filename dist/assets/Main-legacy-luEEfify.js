System.register(["./index-legacy-BI8T41NF.js"],(function(e,t){"use strict";var a,n,o,r,s,i,u,l,c,d,p,g,f,h,m,b,v,w,y,_,k,I,x,T,$;return{setters:[e=>{a=e._,n=e.I,o=e.o,r=e.c,s=e.w,i=e.a,u=e.n,l=e.t,c=e.r,d=e.g,p=e.b,g=e.d,f=e.e,h=e.f,m=e.h,b=e.i,v=e.j,w=e.k,y=e.l,_=e.m,k=e.p,I=e.q,x=e.s,T=e.u,$=e.v}],execute:function(){var B=document.createElement("style");B.textContent="ion-spinner{width:60px;height:60px}.loader{width:45px;aspect-ratio:1;--_g: no-repeat radial-gradient(farthest-side,#205400 80%,#0000);background:var(--_g) 0 0,var(--_g) 100% 0,var(--_g) 100% 100%,var(--_g) 0 100%;background-size:38% 38%;animation:l38 .4s infinite}@keyframes l38{to{background-position:100% 0,100% 100%,0 100%,0 0}}.color1{--_g: no-repeat radial-gradient(farthest-side,#205400 80%,#0000)}.color2{--_g: no-repeat radial-gradient(farthest-side,#003ea8 80%,#0000)}.color3{--_g: no-repeat radial-gradient(farthest-side,#ad1a03 80%,#0000)}.color4{--_g: no-repeat radial-gradient(farthest-side,#d1af02 80%,#0000)}.loader2,.loader3{width:35px;aspect-ratio:1;--_g: no-repeat radial-gradient(circle closest-side,#205400 80%,#0000);background:var(--_g) 0 0,var(--_g) 0 100%,var(--_g) 100% 100%;background-size:40% 40%;animation:l11 1s infinite linear}@keyframes l11{25%{background-position:100% 0,0 100%,100% 100%}50%{background-position:100% 0,0 0,100% 100%}75%{background-position:100% 0,0 0,0 100%}to{background-position:100% 100%,0 0,0 100%}}.backdrop[data-v-ca71f365]{background:#001240;background:linear-gradient(326deg,#001240,#040f2e 43%,#031244 74%,#042561)}ion-button[data-v-ca71f365]{--background: #f05454;--background-hover: #8d1a1a;--background-activated: #8d1a1a;--background-focused: #8d1a1a;--color: rgb(255, 255, 255);--border-radius: 50px;--box-shadow: 0 2px 6px 0 rgb(0, 0, 0, .25);--ripple-color: #8d1a1a;--padding-top: 10px;--padding-bottom: 10px}ion-input.custom[data-v-ca71f365]{--color: #fff !important;--placeholder-color: #ddd !important;--placeholder-opacity: .8 !important}ion-input.custom.ios .input-bottom .helper-text[data-v-ca71f365],ion-input.custom.ios .input-bottom .counter[data-v-ca71f365],ion-input.custom.md .input-bottom .helper-text[data-v-ca71f365],ion-input.custom.md .input-bottom .counter[data-v-ca71f365]{color:red}ion-label[data-v-ca71f365]{--color: rgb(255, 255, 255) !important}ion-label.black[data-v-ca71f365]{--color: rgb(0, 0, 0) !important}ion-label.white[data-v-ca71f365]{--color: rgb(255, 255, 255) !important}ion-checkbox[data-v-ca71f365]{--border-color: white;--border-radius: 4px}.backdrop[data-v-347337f5]{background:#001240;background:linear-gradient(326deg,#001240,#040f2e 43%,#031244 74%,#042561)}\n",document.head.appendChild(B);const C={style:{"font-weight":"600"}},A=a({components:{IonPage:n},data:()=>({message:"Please wait...",color:"color1"}),mounted(){let e=1,t=setInterval((()=>{e++,this.color="color"+e,4==e&&(e=0)}),500);setTimeout((()=>clearInterval(t)),25e3)}},[["render",function(e,t,a,n,d,p){const g=c("ion-page");return o(),r(g,{style:{display:"flex","justify-content":"center","align-items":"center","background-color":"whitesmoke"}},{default:s((()=>[i("div",{class:u(["loader",d.color])},null,2),i("div",{class:u(d.message?"animate__animated animate__bounceIn":"animate__animated animate__bounceOut"),style:{color:"black",position:"absolute",bottom:"15vh"}},[i("span",C,l(d.message),1)],2)])),_:1})}]]);var P,U,N={exports:{}},S={exports:{}};P="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",U={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&U.rotl(e,8)|4278255360&U.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=U.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],a=0,n=0;a<e.length;a++,n+=8)t[n>>>5]|=e[a]<<24-n%32;return t},wordsToBytes:function(e){for(var t=[],a=0;a<32*e.length;a+=8)t.push(e[a>>>5]>>>24-a%32&255);return t},bytesToHex:function(e){for(var t=[],a=0;a<e.length;a++)t.push((e[a]>>>4).toString(16)),t.push((15&e[a]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],a=0;a<e.length;a+=2)t.push(parseInt(e.substr(a,2),16));return t},bytesToBase64:function(e){for(var t=[],a=0;a<e.length;a+=3)for(var n=e[a]<<16|e[a+1]<<8|e[a+2],o=0;o<4;o++)8*a+6*o<=8*e.length?t.push(P.charAt(n>>>6*(3-o)&63)):t.push("=");return t.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var t=[],a=0,n=0;a<e.length;n=++a%4)0!=n&&t.push((P.indexOf(e.charAt(a-1))&Math.pow(2,-2*n+8)-1)<<2*n|P.indexOf(e.charAt(a))>>>6-2*n);return t}},S.exports=U;var D=S.exports,V={utf8:{stringToBytes:function(e){return V.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(V.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],a=0;a<e.length;a++)t.push(255&e.charCodeAt(a));return t},bytesToString:function(e){for(var t=[],a=0;a<e.length;a++)t.push(String.fromCharCode(e[a]));return t.join("")}}},E=V,L=function(e){return null!=e&&(R(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&R(e.slice(0,0))}(e)||!!e._isBuffer)};function R(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}!function(){var e=D,t=E.utf8,a=L,n=E.bin,o=function(r,s){r.constructor==String?r=s&&"binary"===s.encoding?n.stringToBytes(r):t.stringToBytes(r):a(r)?r=Array.prototype.slice.call(r,0):Array.isArray(r)||r.constructor===Uint8Array||(r=r.toString());for(var i=e.bytesToWords(r),u=8*r.length,l=1732584193,c=-271733879,d=-1732584194,p=271733878,g=0;g<i.length;g++)i[g]=16711935&(i[g]<<8|i[g]>>>24)|4278255360&(i[g]<<24|i[g]>>>8);i[u>>>5]|=128<<u%32,i[14+(u+64>>>9<<4)]=u;var f=o._ff,h=o._gg,m=o._hh,b=o._ii;for(g=0;g<i.length;g+=16){var v=l,w=c,y=d,_=p;l=f(l,c,d,p,i[g+0],7,-680876936),p=f(p,l,c,d,i[g+1],12,-389564586),d=f(d,p,l,c,i[g+2],17,606105819),c=f(c,d,p,l,i[g+3],22,-1044525330),l=f(l,c,d,p,i[g+4],7,-176418897),p=f(p,l,c,d,i[g+5],12,1200080426),d=f(d,p,l,c,i[g+6],17,-1473231341),c=f(c,d,p,l,i[g+7],22,-45705983),l=f(l,c,d,p,i[g+8],7,1770035416),p=f(p,l,c,d,i[g+9],12,-1958414417),d=f(d,p,l,c,i[g+10],17,-42063),c=f(c,d,p,l,i[g+11],22,-1990404162),l=f(l,c,d,p,i[g+12],7,1804603682),p=f(p,l,c,d,i[g+13],12,-40341101),d=f(d,p,l,c,i[g+14],17,-1502002290),l=h(l,c=f(c,d,p,l,i[g+15],22,1236535329),d,p,i[g+1],5,-165796510),p=h(p,l,c,d,i[g+6],9,-1069501632),d=h(d,p,l,c,i[g+11],14,643717713),c=h(c,d,p,l,i[g+0],20,-373897302),l=h(l,c,d,p,i[g+5],5,-701558691),p=h(p,l,c,d,i[g+10],9,38016083),d=h(d,p,l,c,i[g+15],14,-660478335),c=h(c,d,p,l,i[g+4],20,-405537848),l=h(l,c,d,p,i[g+9],5,568446438),p=h(p,l,c,d,i[g+14],9,-1019803690),d=h(d,p,l,c,i[g+3],14,-187363961),c=h(c,d,p,l,i[g+8],20,1163531501),l=h(l,c,d,p,i[g+13],5,-1444681467),p=h(p,l,c,d,i[g+2],9,-51403784),d=h(d,p,l,c,i[g+7],14,1735328473),l=m(l,c=h(c,d,p,l,i[g+12],20,-1926607734),d,p,i[g+5],4,-378558),p=m(p,l,c,d,i[g+8],11,-2022574463),d=m(d,p,l,c,i[g+11],16,1839030562),c=m(c,d,p,l,i[g+14],23,-35309556),l=m(l,c,d,p,i[g+1],4,-1530992060),p=m(p,l,c,d,i[g+4],11,1272893353),d=m(d,p,l,c,i[g+7],16,-155497632),c=m(c,d,p,l,i[g+10],23,-1094730640),l=m(l,c,d,p,i[g+13],4,681279174),p=m(p,l,c,d,i[g+0],11,-358537222),d=m(d,p,l,c,i[g+3],16,-722521979),c=m(c,d,p,l,i[g+6],23,76029189),l=m(l,c,d,p,i[g+9],4,-640364487),p=m(p,l,c,d,i[g+12],11,-421815835),d=m(d,p,l,c,i[g+15],16,530742520),l=b(l,c=m(c,d,p,l,i[g+2],23,-995338651),d,p,i[g+0],6,-198630844),p=b(p,l,c,d,i[g+7],10,1126891415),d=b(d,p,l,c,i[g+14],15,-1416354905),c=b(c,d,p,l,i[g+5],21,-57434055),l=b(l,c,d,p,i[g+12],6,1700485571),p=b(p,l,c,d,i[g+3],10,-1894986606),d=b(d,p,l,c,i[g+10],15,-1051523),c=b(c,d,p,l,i[g+1],21,-2054922799),l=b(l,c,d,p,i[g+8],6,1873313359),p=b(p,l,c,d,i[g+15],10,-30611744),d=b(d,p,l,c,i[g+6],15,-1560198380),c=b(c,d,p,l,i[g+13],21,1309151649),l=b(l,c,d,p,i[g+4],6,-145523070),p=b(p,l,c,d,i[g+11],10,-1120210379),d=b(d,p,l,c,i[g+2],15,718787259),c=b(c,d,p,l,i[g+9],21,-343485551),l=l+v>>>0,c=c+w>>>0,d=d+y>>>0,p=p+_>>>0}return e.endian([l,c,d,p])};o._ff=function(e,t,a,n,o,r,s){var i=e+(t&a|~t&n)+(o>>>0)+s;return(i<<r|i>>>32-r)+t},o._gg=function(e,t,a,n,o,r,s){var i=e+(t&n|a&~n)+(o>>>0)+s;return(i<<r|i>>>32-r)+t},o._hh=function(e,t,a,n,o,r,s){var i=e+(t^a^n)+(o>>>0)+s;return(i<<r|i>>>32-r)+t},o._ii=function(e,t,a,n,o,r,s){var i=e+(a^(t|~n))+(o>>>0)+s;return(i<<r|i>>>32-r)+t},o._blocksize=16,o._digestsize=16,N.exports=function(t,a){if(null==t)throw new Error("Illegal argument "+t);var r=e.wordsToBytes(o(t,a));return a&&a.asBytes?r:a&&a.asString?n.bytesToString(r):e.bytesToHex(r)}}();var j=N.exports;const O=d(j),M={components:{IonPage:n,IonButton:p,IonInput:g,IonCardTitle:f,IonLabel:h,IonInputPasswordToggle:m,IonCheckbox:b,IonBackdrop:v,alertController:w,loadingController:y},data:()=>({user_input:{username:"",password:"",remember:!1},device:"",log_response:{}}),async created(){let e=await this.$function.getDeviceInfo();this.device=`${e.model}=>${e.identifier}`,null!=await this.$storage.getItem("remember-user")&&(this.user_input=await this.$storage.getItem("remember-user")),this.$function.checkperms()},methods:{async login(){const e=await y.create({message:"Please Wait a moment...",translucent:!0});if(await e.present(),!this.$function.isTimeAuto())return this.$function.showAlert({header:"Warning",message:"Please enable time auto to use this app."}),await e.dismiss();if(!this.$function.checkTimeZone().status)return await e.dismiss();this.user_input.remember&&await this.$storage.setItem("remember-user",this.user_input);let t={username:this.user_input.username,password:O(this.user_input.password),device:this.device},a=await this.$api.login(t);if(this.log_response=a,a.status)a.isRegistered?(await e.dismiss(),await this.$storage.setItem("session-user",a.data),await this.$storage.setItem("app-config",a.appconfig),this.$router.push("dashboard").then((()=>{window.location.reload()}))):(await e.dismiss(),this.registerDevice());else{let t={header:"Warning",message:a.message};this.$function.showAlert(t),await e.dismiss()}await e.dismiss()},async registerDevice(){const e=await w.create({header:"Confirm",message:"Do you want to register this device to your account?",buttons:[{text:"No",role:"cancel"},{text:"Yes",role:"confirm",handler:this.register}]});await e.present()},async register(){if((await this.$api.savedata({tableName:"spottv2.device_registered",fields:{userID:this.log_response.data.ID,device:this.device},key:["device"]})).error=0){let e={header:"Success!",message:"Device registered successfully. Please login to continue."};this.$function.showAlert(e)}setTimeout((async()=>{await this.login()}),750)}}},z=e=>(I("data-v-ca71f365"),e=e(),x(),e),W={id:"container",class:"pa-6",style:{"margin-top":"-10%"}},G=z((()=>i("img",{style:{height:"15vh",margin:"auto"},src:"/icon.png"},null,-1))),H={class:"d-flex justify-start py-2 px-1"},Y=z((()=>i("span",{style:{color:"white"}},"Remember me",-1))),Z=a(M,[["render",function(e,t,a,n,u,l){const d=c("IonLabel"),p=c("IonCardTitle"),g=c("IonInput"),f=c("IonInputPasswordToggle"),h=c("ion-checkbox"),m=c("IonButton"),b=c("ion-page");return o(),r(b,{class:"backdrop"},{default:s((()=>[_(d,{style:{color:"white","font-size":"13px"},class:"pa-2"},{default:s((()=>[k(" Version: 1.2 ")])),_:1}),i("div",W,[i("div",null,[G,_(p,{class:"pb-5",style:{color:"white","font-weight":"600",padding:"4vh"}},{default:s((()=>[k("STERLING PAPER GROUP ONLINE TIME TRACKER")])),_:1}),_(g,{modelValue:u.user_input.username,"onUpdate:modelValue":t[0]||(t[0]=e=>u.user_input.username=e),label:"Username",fill:"outline","label-placement":"stacked",placeholder:"Enter Username",style:{"text-align":"left !important"},class:"pb-3 custom"},null,8,["modelValue"]),_(g,{modelValue:u.user_input.password,"onUpdate:modelValue":t[1]||(t[1]=e=>u.user_input.password=e),type:"password",label:"Password",fill:"outline",placeholder:"Enter Password","label-placement":"stacked",style:{"text-align":"left !important"},class:"custom"},{default:s((()=>[_(f,{slot:"end"})])),_:1},8,["modelValue"]),i("div",H,[_(h,{modelValue:u.user_input.remember,"onUpdate:modelValue":t[2]||(t[2]=e=>u.user_input.remember=e),"label-placement":"end"},{default:s((()=>[Y])),_:1},8,["modelValue"])]),_(m,{onClick:t[3]||(t[3]=e=>l.login()),class:"mt-4",expand:"full",shape:"round",size:"large"},{default:s((()=>[k("LOG IN")])),_:1})])])])),_:1})}],["__scopeId","data-v-ca71f365"]]);T("Browser",{web:()=>$((()=>t.import("./web-legacy-C0FdlckN.js")),void 0).then((e=>new e.BrowserWeb))});const q={name:"Update",components:{IonPage:n,IonButton:p},data:()=>({}),methods:{async updateNow(){},later(){navigator.app.exitApp()}}},F=e=>(I("data-v-347337f5"),e=e(),x(),e),K={class:"d-flex justify-center backdrop"},J={style:{position:"absolute",top:"50%",transform:"translateY(-50%)",width:"80vw"}},Q=F((()=>i("img",{class:"d-flex pb-5",style:{height:"15vh",margin:"auto"},src:"/new.png"},null,-1))),X=F((()=>i("h3",{class:"d-flex justify-center pb-2",style:{color:"white"}},"New Version Available",-1))),ee=F((()=>i("p",{class:"pb-7",style:{"text-align":"center",color:"#BDBDBD"}},"Please download and install the new version to access our latest features",-1)));e("default",a({components:{IonPage:n,Load:A,Login:Z,Update:a(q,[["render",function(e,t,a,n,u,l){const d=c("ion-button"),p=c("ion-page");return o(),r(p,{class:"backdrop"},{default:s((()=>[i("div",K,[i("div",J,[Q,X,ee,_(d,{onClick:t[0]||(t[0]=e=>l.updateNow()),class:"mb-2",expand:"full",color:"primary",shape:"round"},{default:s((()=>[k("Update Now")])),_:1}),_(d,{onClick:t[1]||(t[1]=e=>l.later()),expand:"full",color:"medium",shape:"round"},{default:s((()=>[k("Close the app")])),_:1})])])])),_:1})}],["__scopeId","data-v-347337f5"]]),Maintenance:a({},[["render",function(e,t){return null}]])},data:()=>({APP_VERSION:"1.2.8",app:{status:!1,user:!1,update:!1,maintenance:!1},loaded:!1}),async created(){let e=await this.$function.getNet(),t=await this.$function.getUser(),a=await this.$function.checknet();if(t){if(this.app.status=!0,this.app.user=!0,e.connected&&a){let e=await this.checkAppConfig();if(e.version!=this.APP_VERSION)this.app.update=!0;else if(1==e.onMaintenance)this.app.maintenance=!0;else{let e=await this.checkUser(t);1==e.forceLogout?(await this.$storage.removeItem("session-user"),this.app.status=!0,this.app.user=!1):1==e.updateConfig?(e.updateConfig=0,await this.$storage.setItem("session-user",e)):(this.app.status=!0,this.app.user=!0)}}}else this.app.status=!0,this.app.user=!1;this.app.status&&this.app.user&&!this.app.update&&!this.app.maintenance&&this.$router.push("dashboard").then((()=>{window.location.reload()}))},methods:{async checkUser(e){let t=await this.$api.masterselect({table_name:"spottv2.users_view",having:{username:e.username}});return await this.$api.savedata({tableName:"spottv2.user_config",fields:{userID:t.ID,updateConfig:0,forceLogout:0},key:["userID"]}),t[0]},async checkAppConfig(e){return(await this.$api.masterselect({table_name:"spottv2.app_config"}))[0]}}},[["render",function(e,t,a,n,i,u){const l=c("Login"),d=c("Update"),p=c("Maintenance"),g=c("Load"),f=c("IonPage");return o(),r(f,null,{default:s((()=>[i.app.status&&!i.app.user?(o(),r(l,{key:0})):i.app.status&&!i.app.user&&i.app.update?(o(),r(d,{key:1})):i.app.status&&!i.app.user&&i.app.maintenance?(o(),r(p,{key:2})):(o(),r(g,{key:3}))])),_:1})}]]))}}}));
